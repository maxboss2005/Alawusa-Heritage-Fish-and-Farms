<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>My Account | Alawusa Heritage</title>
  <link rel="stylesheet" href="style.css">
  <link rel="shortcut icon" href="Alawusa heritage icon - Icon.png" type="img">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script type="module" src="homepage.js"></script>
  <style>
/* -------------------------
       Reset & base
       ------------------------- */

       /* Modern E-commerce Variables */
        :root {
            --primary-color: #1a4d2e;
            --secondary-color: #28a745;
            --accent-color: #ffc107;
            --light-bg: #f9f9f9;
            --dark-text: #333;
            --light-text: #fff;
            --border-radius: 8px;
            --box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            --transition: all 0.3s ease;
        }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body {
  max-width: 100%;
  overflow-x: hidden;
}

    body {
      font-family: 'Poppins', sans-serif;
      background: #f5f5f5;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      color: #222;
    }

    
    a { color: inherit; text-decoration: none; }
  

    /* -------------------------
       Header
       ------------------------- */
  header {
  position: sticky;   /* Makes it stick */
  top: 0;             /* Sticks to the very top */
  z-index: 1000;      /* Ensures it stays above other content */
  background: #fff;   /* Keeps background solid so content doesnâ€™t bleed through */
  padding: 10px 16px;
  display: flex;
  align-items: center;
  gap: 10px;
  border-bottom: 1px solid #eee;
  flex-wrap: nowrap;
  width: 100%;
}





    /* hamburger (desktop hidden) */
    .menu-toggle {
      display: none;
      font-size: 22px;
      line-height: 1;
      cursor: pointer;
      background: transparent;
      border: none;
      padding: 6px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      flex: 0 0 auto;
      margin-right: 70px;
    }
    .logo img { display: block; width: 100px;}
    .logo .brand { color: #f68b1e; font-weight: 600; font-size: 18px; }

    /* Search (flexible) */
    .search-bar {
      display: flex;
      flex: 0 0 auto;
      min-width: 200px;                 /* <--- critical for responsive shrinking */
      gap: 0;
      margin: 0 10px;
      margin-left: 20%;
    }

    .search-icon {
      display: none;
    }

    @media (max-width: 768px){
      .search-bar {
        margin: 0px;
        margin-left: 0%;
        flex: 1 1 auto;
      }
    }
    .search-bar input {
      flex: 1 1 auto;
      min-width: 0;                 /* lets input shrink below content width */
      padding: 10px 12px;
      border: 1px solid #ddd;
      border-radius: 6px 0 0 6px;
      outline: none;
      font-size: 14px;
    }
    .search-bar button {
      flex: 0 0 auto;
      padding: 10px 14px;
      border: none;
      background: #4c9949;
      color: #fff;
      border-radius: 0 6px 6px 0;
      cursor: pointer;
      font-weight: 600;
    }

    /* header actions */
    .header-actions {
      display: flex;
      align-items: center;
      gap: 16px;
      flex: 0 0 auto;
    }

    /* user dropdown */
    .user-menu { position: relative; cursor: pointer; }
    @media (max-width: 768px){

    }
    .user-menu .greet { font-weight: 500; display:inline-block; padding:6px; }
    .dropdown {
      display: block;
      position: absolute;
      top: calc(100% + 8px);
      right: 0;
      background: #fff;
      border: 1px solid #eee;
      border-radius: 8px;
      box-shadow: 0 6px 20px rgba(92, 18, 18, 0.08);
      min-width: 180px;
      z-index: 1001;
      
    }
    .dropdown li { list-style: none; padding: 10px 12px; cursor: pointer; }
    .dropdown li:hover { background: #cef1cd; color: #4e9648; }
    .user-menu:focus-within .dropdown,
    

    /* cart */
    .cart-wrapper { position: relative; display:inline-block; }
    @media (max-width: 1000px){
      .cart-wrapper {
        margin-left: 500px;
      }
    }
    .shopping-cart {
      width: 22px; height: 22px; display:block;
      object-fit: contain;
    }
    .cart-count {
      position: absolute;
      top: -6px;
      right: -8px;
      background: red;
      color: #fff;
      font-size: 12px;
      font-weight: 700;
      padding: 3px 6px;
      border-radius: 999px;
      border: 0px solid #fff; /* white ring */
      line-height: 1;
    }

    @media (min-width: 300px) {
  .cart-wrapper {
    margin-left: 0;
    display: flex;
    align-items: center;
  }
  .cart-wrapper i {
    font-size: 20px;
  }
  .cart-count {
    top: -5px;
    right: -6px;
    font-size: 11px;
  }
}


    /* help */
    .help { font-weight: 500; cursor: pointer; padding: 6px; }

    @media (max-width: 768px) {
      .help {
        display: none;
      }
    }

    /* -------------------------
       Dashboard layout
       ------------------------- */
    .dashboard-container { display: flex; flex: 1 1 auto; width: 100%; min-height: calc(100vh - 68px); }
    .sidebar {
      background: #fff;
      width: 250px;
      min-height: 100vh;
      padding: 20px;
      border-right: 1px solid #eee;
      transition: transform 260ms cubic-bezier(.2,.9,.3,1);
    }
    .sidebar h2 { font-size: 18px; color: #3a8034; margin-bottom: 18px; }
    .sidebar ul { list-style: none; }
    .sidebar li {
      padding: 11px 10px; margin-bottom: 8px; border-radius: 6px; cursor: pointer; font-weight: 500;
    }
    .sidebar li:hover, .sidebar li.active { background: #cef1cd; color: #4e9648; }

    .main-content { flex: 1 1 auto; padding: 30px; }
    section { background: #fff; padding: 20px; margin-bottom: 18px; border-radius: 8px; box-shadow: 0 1px 4px rgba(0,0,0,0.06); }

    /* overlay (for mobile menu) */
    .overlay {
      position: fixed;
      inset: 0;
      display: none;
      background: rgba(0,0,0,0.4);
      z-index: 1000;
    }
    .overlay.show { display: block; }

    .mobile-content {
      display: none;
    }

    /* -------------------------
       Mobile responsiveness
       ------------------------- */
    @media (max-width: 768px) {
      header {
        align-items: center;
        gap: 8px;
        padding: 10px;
      }

      .menu-toggle { display: inline-flex; }
      .logo { order: 2; }
      .menu-toggle { order: 1; }

      /* place header actions to the right */
      .header-actions { order: 3; }

      /* make search full-width below header actions */
      .search-bar {
        order: 4;
        width: 100%;
        margin: 8px 0 0 0;
      }

      /* Sidebar behavior on mobile: slide-in from left */
      .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        bottom: 0;
        width: 260px;
        transform: translateX(-100%); /* hidden by default */
        z-index: 1002;
        box-shadow: 4px 0 18px rgba(0,0,0,0.12);
      }
      .sidebar.open {
        transform: translateX(0); /* visible when open */
      }

      /* when sidebar is open we show overlay (controlled by JS) */
      .dashboard-container { flex-direction: column; }
      .mobile-content { padding: 5px; display: none;}
    }

    /* tiny screen tweaks */
    @media (max-width: 1023px) {
      .search-bar input { padding: 9px; font-size: 13px; }
      .search-bar button { padding: 9px 10px; font-size: 13px; }
      .logo .brand { font-size: 16px; }
  .search-bar { display: none; }
  .search-icon {
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: #888;
    font-size: 18px;
    display: block;
  }
  .desktop-content { display: block; }
  /* Keep user menu visible and nicely sized on mobile */
  .user-menu {
    display: flex;
    align-items: center;
    gap: 5px;
  }
  .user-menu span {
    font-size: 14px;
    
  }
}


    

    .desktop-content { flex: 1 1 auto; padding: 3px; }
    .profile-section h4 { font-size: 20px;}
    .profile-section p1 {border: 1px solid black; padding: 10px 0px 10px 10px; border-radius: 1px; width: 180px;}

    .profile-section{display: block; line-height: 2;}

    .mobile-search-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  z-index: 2000;
  align-items: center;
  justify-content: center;
}
.mobile-search-box {
  background: #fff;
  padding: 15px;
  border-radius: 8px;
  width: 90%;
  display: flex;
  gap: 8px;
  align-items: center;
}
.mobile-search-box input {
  flex: 1;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 6px;
}
.mobile-search-box button {
  padding: 10px 14px;
  background: #4c9949;
  border: none;
  color: #fff;
  border-radius: 6px;
  cursor: pointer;
}
#closeMobileSearch {
  font-size: 22px;
  margin-left: 6px;
  cursor: pointer;
}

/* General profile section styling */
.profile-section {
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  padding: 20px;
  margin: 20px auto;
  max-width: 5000px;
  transition: all 0.3s ease-in-out;
  border: 1px solid #f1f1f1;
}

/* Hover glow */
.profile-section:hover {
  transform: translateY(-4px);
  box-shadow: 0 6px 18px rgba(0,0,0,0.12);
}

/* Section title */
.profile-section h4 {
  font-size: 1.2rem;
  font-weight: 600;
  color: green;
  margin-bottom: 15px;
  position: relative;
}

.profile-section h4::after {
  content: "";
  width: 40px;
  height: 3px;
  background: green;
  display: block;
  margin-top: 6px;
  border-radius: 2px;
}

/* Inputs */
.profile-section input,
.profile-section textarea {
  width: 100%;
  padding: 12px 15px;
  border: 1px solid #ddd;
  border-radius: 8px;
  outline: none;
  font-size: 14px;
  margin-bottom: 12px;
  transition: border 0.3s ease;
  font-family: "Poppins", sans-serif;
}

.profile-section input:focus,
.profile-section textarea:focus {
  border: 1px solid green;
  box-shadow: 0 0 0 3px rgba(255,90,0,0.1);
}

/* Save buttons */
.profile-section button {
  background: linear-gradient(135deg, #07d846, #3c9734);
  color: #fff;
  border: none;
  padding: 12px 20px;
  border-radius: 25px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  display: inline-block;
  box-shadow: 0 4px 12px rgba(255,90,0,0.3);
}

.profile-section button:hover {
  background: linear-gradient(135deg, #3c9734, #043f07);
  transform: scale(1.05);
  box-shadow: 0 6px 16px rgba(255,90,0,0.4);
}

/* Current info */
.profile-section p {
  margin-top: 10px;
  font-size: 14px;
  color: #333;
}

.profile-section span {
  font-weight: 100;
  color: #111;
}

.footer {
  margin-top: 100px;
  background: #0f2c0f;
  color: #fff;
  padding: 40px 20px 20px;
  font-size: 14px;
  line-height: 1.8;
}

.footer-container {
  max-width: 1200px;
  margin: 0 auto;
}

.footer-links {
  display: flex;
  flex-wrap: wrap;
  gap: 40px;
  justify-content: space-between;
}

.footer-column h5 {
  font-weight: 600;
  margin-bottom: 15px;
  color: #7ed957;
}

.footer-column ul li {
  margin-bottom: 10px;
  list-style: none;
}

.footer-column ul li a {
  color: #fff;
  transition: color 0.3s;
}

.footer-column ul li a:hover {
  color: #7ed957;
}

.social-links i {
  margin-right: 8px;
}

.footer-copy {
  margin-top: 30px;
  text-align: center;
  border-top: 1px solid #333;
  padding-top: 15px;
  font-size: 13px;
  color: #bbb;
}

/* Responsive footer */
@media (max-width: 768px){
  .footer { margin-top: 250px;}
  .footer-links {
    flex-direction: column;
    gap: 20px;
  }
}

.categories {
  margin-top: 300px;
}

    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Poppins', sans-serif;
      background: #f5f5f5;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      color: #222;
    }
    a { color: inherit; text-decoration: none; }

    /* HEADER */
    header {
      position: sticky;
      top: 0;
      z-index: 1000;
      background: #fff;
      padding: 10px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid #eee;
      flex-wrap: wrap;
    }

    /* Hamburger */
    .menu-toggle {
      display: none;
      font-size: 22px;
      cursor: pointer;
      background: transparent;
      border: none;
      margin-right: 10px;
    }

    /* Logo */
    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      flex: 0 0 auto;
    }
    .logo img { width: 100px; }

    /* Search bar (desktop) */
    .search-bar {
      display: flex;
      flex: 1;
      margin: 0 20px;
      max-width: 600px;
    }
    .search-bar input {
      flex: 1;
      padding: 10px 12px;
      border: 1px solid #ddd;
      border-radius: 6px 0 0 6px;
      outline: none;
      font-size: 14px;
    }
    .search-bar button {
      padding: 10px 14px;
      border: none;
      background: #4c9949;
      color: #fff;
      border-radius: 0 6px 6px 0;
      cursor: pointer;
      font-weight: 600;
    }

    /* Header actions */
    .header-actions {
      display: flex;
      align-items: center;
      gap: 18px;
      flex: 0 0 auto;
    }

    /* User dropdown */
    .user-menu {
      position: relative;
      cursor: pointer;
    }
    .user-menu span { font-weight: 500; }
    .dropdown {
      display: none;
      position: absolute;
      top: calc(100% + 6px);
      right: 0;
      background: #fff;
      border: 1px solid #eee;
      border-radius: 8px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.08);
      min-width: 180px;
    }
    .dropdown li {
      list-style: none;
      padding: 10px 12px;
    }
    .dropdown li:hover { background: #cef1cd; color: #4c9949; }
    .user-menu:hover .dropdown { display: block; }

    /* Cart */
    .cart-wrapper {
      position: relative;
      font-size: 20px;
    }
    .cart-count {
      position: absolute;
      top: -6px;
      right: -8px;
      background: red;
      color: #fff;
      font-size: 12px;
      font-weight: 700;
      padding: 2px 6px;
      border-radius: 50%;
    }

    /* Search icon (mobile only) */
    .search-icon { display: none; cursor: pointer; font-size: 18px; }

    /* Mobile overlay search */
    .mobile-search-overlay {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      z-index: 2000;
      align-items: center;
      justify-content: center;
    }
    .mobile-search-box {
      background: #fff;
      padding: 15px;
      border-radius: 8px;
      width: 90%;
      display: flex;
      gap: 8px;
      align-items: center;
    }
    .mobile-search-box input {
      flex: 1;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 6px;
    }
    .mobile-search-box button {
      padding: 10px 14px;
      background: #4c9949;
      border: none;
      color: #fff;
      border-radius: 6px;
      cursor: pointer;
    }
    #closeMobileSearch {
      font-size: 22px;
      margin-left: 6px;
      cursor: pointer;
    }

    /* Responsive */
    @media (max-width: 768px) {
      header { flex-wrap: nowrap; }
      .menu-toggle { display: inline-block; }
      .search-bar { display: none; }
      .search-icon { display: none; }
    }

    /* Footer */
        .footer {
            background: var(--primary-color);
            color: var(--light-text);
            padding: 60px 0 20px;
        }

        .footer-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-col {
            flex: 1;
            min-width: 200px;
        }

        .footer-col h3 {
            font-size: 20px;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
        }

        .footer-col h3::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 50px;
            height: 2px;
            background: var(--secondary-color);
        }

        .footer-col ul {
            list-style: none;
        }

        .footer-col ul li {
            margin-bottom: 10px;
        }

        .footer-col ul li a {
            color: #ddd;
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-col ul li a:hover {
            color: var(--secondary-color);
            padding-left: 5px;
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-links a {
            display: inline-block;
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .social-links a:hover {
            background: var(--secondary-color);
            transform: translateY(-3px);
        }

        .social-links img {
            width: 20px;
            height: 20px;
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
            font-size: 14px;
            color: #aaa;
        }

        @media (max-width: 768px) {
  .sidebar li {
    padding: 8px 10px;   /* reduce vertical padding */
    margin-bottom: 20px;  /* reduce gap between items */
    font-size: 14px;     /* optional: make text a bit smaller */
  }

  .sidebar h2 {
    margin-bottom: 10px; /* reduce gap under "My Account" */
    font-size: 16px;     /* optional: smaller title */
  }
}

.promo-banner {
  margin-left: 20%;
  font-weight: 500;
  color: #28a745;
  font-size: 14px;
}

@media (max-width: 1000px) {
  .promo-banner {
    display: none;
  }
}


.promo-banner {
  background: linear-gradient(90deg, #28a745, #1a4d2e);
  color: #fff;
  font-weight: 600;
  font-size: 14px;
  padding: 8px 18px;
  border-radius: 25px;
  display: flex;
  align-items: center;
  gap: 8px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.08);
  animation: fadeIn 1s ease-in-out;
  cursor: pointer;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  margin-left: 15%;
}

.promo-banner:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 14px rgba(0,0,0,0.15);
}

.promo-banner i {
  color: #ffc107;
  font-size: 16px;
  animation: pulse 1.5s infinite;
}

/* Smooth entry animation */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Subtle pulsing for the icon */
@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

@media (max-width: 1000px) {
  .promo-banner {
    display: none;
  }
}

/* Newsletter Section */
    .newsletter-section {
  background: #041e42;
  color: white;
  padding: 50px 0;
  margin-bottom: 40px;
}

.newsletter-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;  /* allows wrapping */
  gap: 20px;
  width: 100%;
}

.newsletter-text {
  flex: 1 1 300px;  /* allows shrinking on smaller screens */
}

.newsletter-form {
  display: flex;
  flex: 1 1 300px;
  max-width: 500px;
  width: 100%;
}

    
    .newsletter-form input {
  flex: 1;
  padding: 12px 10px;
  border: none;
  border-radius: 4px 0 0 4px;
  font-size: 1rem;
  min-width: 0; /* prevents stretching */
}

.newsletter-form button {
  background: #15921b;
  color: white;
  border: none;
  padding: 0 20px;
  border-radius: 0 4px 4px 0;
  cursor: pointer;
  transition: background 0.3s ease;
  white-space: nowrap; /* keeps text inside */
}

    
    .newsletter-form button:hover {
      background: #117a15;
    }

    @media (max-width: 768px) {
  .header-actions {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .user-menu{ 
    margin-left: -100px;
  }
}

.header-actions i {
  font-size: 18px;
}

.fa-angle-down {
  transition: transform 0.3s ease;
  cursor: pointer;
}

.fa-angle-down.rotated {
  transform: rotate(180deg);
}

/* Truck animation for promo banner */
.promo-banner i.fa-truck {
  animation: truckMove 2s ease-in-out infinite;
}

@keyframes truckMove {
  0% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(200px);
  }
  50% {
    transform: translateX(0);
  }
  75% {
    transform: translateX(-4px);
  }
  100% {
    transform: translateX(0);
  }
}

/* Search bar styles */
.search-bar {
  display: flex;
  flex: 1;
  margin: 0 20px;
  max-width: 600px;
  min-width: 300px;
}

.search-bar input {
  flex: 1;
  padding: 10px 12px;
  border: 1px solid #ddd;
  border-radius: 6px 0 0 6px;
  outline: none;
  font-size: 14px;
  border-right: none;
}

.search-bar button {
  padding: 10px 20px;
  border: none;
  background: #4c9949;
  color: #fff;
  border-radius: 0 6px 6px 0;
  cursor: pointer;
  font-weight: 600;
  white-space: nowrap;
  transition: background 0.3s ease;
}

.search-bar button:hover {
  background: #3a7a37;
}

/* Search icon (mobile) */
.search-icon {
  display: none;
  cursor: pointer;
  font-size: 18px;
  color: #555;
  padding: 8px;
}

/* Mobile overlay search */
.mobile-search-overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0,0,0,0.8);
  z-index: 2000;
  align-items: flex-start;
  justify-content: center;
  padding-top: 80px;
}

.mobile-search-box {
  background: #fff;
  padding: 20px;
  border-radius: 12px;
  width: 90%;
  max-width: 500px;
  display: flex;
  gap: 10px;
  align-items: center;
  box-shadow: 0 10px 30px rgba(0,0,0,0.3);
}

.mobile-search-box input {
  flex: 1;
  padding: 12px 15px;
  border: 2px solid #4c9949;
  border-radius: 8px;
  font-size: 16px;
  outline: none;
}

.mobile-search-box button {
  padding: 12px 20px;
  background: #4c9949;
  border: none;
  color: #fff;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  white-space: nowrap;
}

#closeMobileSearch {
  font-size: 24px;
  margin-left: 10px;
  cursor: pointer;
  color: #666;
}

/* Responsive design */
@media (max-width: 1024px) {
  .search-bar {
    margin: 0 15px;
    min-width: 250px;
  }
}

@media (max-width: 768px) {
  .search-bar {
    display: none;
  }
  
  .search-icon {
    display: block;
    order: 3;
  }
  
  .promo-banner {
    display: none;
  }
  
  .header-actions {
    order: 4;
  }
}

@media (max-width: 480px) {
  .mobile-search-box {
    flex-direction: column;
    gap: 15px;
  }
  
  .mobile-search-box input,
  .mobile-search-box button {
    width: 100%;
  }
  
  #closeMobileSearch {
    align-self: flex-end;
    margin-left: 0;
  }
}

/* -------------------------
   Header - Responsive
   ------------------------- */
header {
  position: sticky;
  top: 0;
  z-index: 1000;
  background: #fff;
  padding: 10px 16px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  border-bottom: 1px solid #eee;
  flex-wrap: wrap;
  gap: 15px;
  width: 100%;
}

/* Hamburger - visible on mobile */
.menu-toggle {
  display: none;
  font-size: 22px;
  cursor: pointer;
  background: transparent;
  border: none;
  padding: 6px;
  flex: 0 0 auto;
}

/* Logo - centered on mobile */
.logo {
  display: flex;
  align-items: center;
  gap: 10px;
  flex: 0 0 auto;
}
.logo img { 
  width: 100px; 
  height: auto;
}

/* Search bar - flexible on desktop, hidden on mobile */
.search-bar {
  display: flex;
  flex: 1;
  margin: 0 20px;
  max-width: 600px;
  min-width: 200px;
}
.search-bar input {
  flex: 1;
  padding: 10px 12px;
  border: 1px solid #ddd;
  border-radius: 6px 0 0 6px;
  outline: none;
  font-size: 14px;
  border-right: none;
}
.search-bar button {
  padding: 10px 20px;
  border: none;
  background: #4c9949;
  color: #fff;
  border-radius: 0 6px 6px 0;
  cursor: pointer;
  font-weight: 600;
  white-space: nowrap;
}

/* Promo banner - hidden on mobile */
.promo-banner {
  background: linear-gradient(90deg, #28a745, #1a4d2e);
  color: #fff;
  font-weight: 600;
  font-size: 14px;
  padding: 8px 18px;
  border-radius: 25px;
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 0 0 auto;
}

/* Header actions - user menu + cart */
.header-actions {
  display: flex;
  align-items: center;
  gap: 20px;
  flex: 0 0 auto;
}

/* User dropdown */
.user-menu {
  position: relative;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 5px;
}
.user-menu span { 
  font-weight: 500; 
  white-space: nowrap;
}
.dropdown {
  display: none;
  position: absolute;
  top: calc(100% + 6px);
  right: 0;
  background: #fff;
  border: 1px solid #eee;
  border-radius: 8px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.08);
  min-width: 180px;
  z-index: 1001;
}
.dropdown li {
  list-style: none;
  padding: 10px 12px;
}
.dropdown li:hover { background: #cef1cd; color: #4c9949; }
.user-menu:hover .dropdown { display: block; }

/* Cart */
.cart-wrapper {
  position: relative;
  font-size: 20px;
}
.cart-count {
  position: absolute;
  top: -6px;
  right: -8px;
  background: red;
  color: #fff;
  font-size: 12px;
  font-weight: 700;
  padding: 2px 6px;
  border-radius: 50%;
  min-width: 18px;
  text-align: center;
}

/* Search icon - mobile only */
.search-icon { 
  display: none; 
  cursor: pointer; 
  font-size: 18px; 
  color: #555;
  padding: 8px;
}

/* Mobile search overlay */
.mobile-search-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.8);
  z-index: 2000;
  align-items: flex-start;
  justify-content: center;
  padding-top: 80px;
}
.mobile-search-box {
  background: #fff;
  padding: 20px;
  border-radius: 12px;
  width: 90%;
  max-width: 500px;
  display: flex;
  gap: 10px;
  align-items: center;
}
.mobile-search-box input {
  flex: 1;
  padding: 12px 15px;
  border: 2px solid #4c9949;
  border-radius: 8px;
  font-size: 16px;
  outline: none;
}
.mobile-search-box button {
  padding: 12px 20px;
  background: #4c9949;
  border: none;
  color: #fff;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
}
#closeMobileSearch {
  font-size: 24px;
  margin-left: 10px;
  cursor: pointer;
  color: #666;
}

/* -------------------------
   Responsive Breakpoints
   ------------------------- */

/* Tablet (768px - 1024px) */
@media (max-width: 1024px) {
  .search-bar {
    margin: 0 15px;
    min-width: 200px;
  }
  
  .promo-banner {
    font-size: 12px;
    padding: 6px 12px;
    margin-left: 10px;
  }
  
  .header-actions {
    gap: 15px;
  }
}

/* Mobile (768px and below) */
@media (max-width: 768px) {
  header {
    flex-wrap: nowrap;
    padding: 10px 12px;
    gap: 10px;
  }
  
  .menu-toggle {
    display: inline-flex;
    order: 1;
  }
  
  .logo {
    order: 2;
    flex: 1;
    justify-content: center;
  }
  .logo img {
    width: 120px;
  }
  
  .search-bar {
    display: none;
  }
  
  .search-icon {
    display: block;
    order: 3;
    margin-right: 10px;
    margin-left: 30px;
  }
  
  .header-actions {
    order: 4;
    gap: 12px;
  }
  
  .promo-banner {
    display: none;
  }
  
  .user-menu span {
    font-size: 14px;
  }
  
  .user-menu .greet {
    display: block; /* Hide "Welcome" text on mobile */
    margin: 15px;
  }
}

/* Small Mobile (480px and below) */
@media (max-width: 480px) {
  header {
    padding: 8px 10px;
    gap: 8px;
  }
  
  .logo img {
    width: 100px;
    margin-left: -30px;
  }
  
  .header-actions {
    gap: 10px;
  }
  
  .user-menu span {
    display: block; /* Hide all user text on very small screens */
  }
  
  .cart-wrapper {
    font-size: 18px;
  }
  
  .cart-count {
    font-size: 10px;
    padding: 1px 4px;
    min-width: 16px;
    top: -4px;
    right: -6px;
  }
  
  .mobile-search-box {
    flex-direction: column;
    gap: 15px;
  }
  
  .mobile-search-box input,
  .mobile-search-box button {
    width: 100%;
  }
}

  </style>
</head>
<body>

  <!-- Header -->
  <header>
  <button class="menu-toggle" id="menuToggle" aria-label="Open menu">â˜°</button>

  <div class="logo">
    <a href="homepage.html">
      <img src="Alawusa heritage logo.png" alt="Alawusa Heritage logo">
    </a>
  </div>

  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Search for products...">
    <button id="searchBtn">Search</button>
  </div>

  

  <div class="search-icon" id="mobileSearchIcon">
    <i class="fa fa-search"></i>
  </div>

  <div class="header-actions">
    <div class="user-menu">
      <span class="greet">Welcome<i class="fa fa-angle-down"></i></span>
      
      <ul class="dropdown">
        <li><i class="fas fa-info-circle"></i> <a href="useraboutus.html">About Us</a></li>
        <li><i class="fas fa-phone"></i> <a href="usercontact.html">Contact Us</a></li>
        <li><i class="fas fa-comments"></i> <a href="usertestimonial.html">Testimonials</a></li>
      </ul>
    </div>

    <div class="cart-wrapper">
      <a href="usercart.html"><i class="fas fa-shopping-cart"></i></a>
      <span class="cart-count" id="cartCount">0</span>
    </div>
  </div>
</header>
  <!-- Mobile search overlay -->
  <div class="mobile-search-overlay" id="mobileSearchOverlay">
    <div class="mobile-search-box">
      <input id="mobileSearchInput" type="search" placeholder="Search for products...">
      <button id="mobileSearchBtn">Search</button>
      <span id="closeMobileSearch">&times;</span>
    </div>
  </div>

  <!-- overlay for mobile sidebar -->
  <div class="overlay" id="overlay" aria-hidden="true"></div>

  <!-- Dashboard -->
  <div class="dashboard-container">
    <aside class="sidebar" id="sidebar" aria-hidden="false">
      <h2>My Account</h2>
      <ul style="color: black;">
        <a href="homepage.html"><li class="active"><i class="fa-solid fa-user" style="margin-right: 15px;"></i> Profile  </li></a>
        <a href="userproducts.html"><li><i class="fa-solid fa-store" style="margin-right: 15px;"></i> Products </li></a>
        <a href="userorders.html"><li><i class="fa-solid fa-box-open" style="margin-right: 13px;"></i> Orders</li></a>
        <a href="wishlist.html"><li><i class="fa-solid fa-bookmark" style="margin-right: 20px;"></i> Wishlist</li></a>
        <li id="logoutButton"><i class="fa-solid fa-sign-out" style="margin-right: 15px;"></i> Logout</li>
      
      </ul>
    </aside>


<div class="desktop-content"> 
    <main class="main-content" id="mainContent">
      <!-- Account Details -->
<section id="account-details" class="profile-section">
  <h4>Account Details</h4>
  <p><strong>Full Name:</strong> <span id="displayName"></span></p>
  <p><strong>Email:</strong> <span id="displayEmail"></span></p>
  <p><strong>Phone:</strong> <span id="displayPhone"></span></p>
  <p><strong>Home Address:</strong> <span id="displayAddress"></span></p>
</section>

<!-- Edit Account -->
<section id="edit-account" class="profile-section">
  <h4>Edit Account</h4>
  <input type="text" id="editName" placeholder="Full Name">
  <input type="text" id="editPhone" placeholder="Phone Number">
  <input type="text" id="editAddress" placeholder="Home Address">
  <button id="saveAccountBtn">Save Changes</button>
</section>

<!-- Change Password -->
<section id="change-password" class="profile-section">
  <h4>Change Password</h4>
  <input type="password" id="oldPassword" placeholder="Old Password">
  <input type="password" id="newPassword" placeholder="New Password">
  <input type="password" id="confirmPassword" placeholder="Confirm Password">
  <button id="changePasswordBtn">Update Password</button>
</section>

<!-- Replace the existing Profile Picture section with this: -->
<section id="profile-picture" class="profile-section">
  <h4>Profile Picture</h4>
  <img id="profileImg" src="avatar.png" width="100" height="100" style="border-radius:50%; margin-bottom:10px;">
  <input type="file" id="uploadProfilePic" accept="image/*">
  <button id="uploadBtn">Upload Picture</button>
  <p style="font-size: 12px; color: #666; margin-top: 10px;">
    <i class="fas fa-info-circle"></i> 
    <span id="storageInfo">Guest users: Picture will be lost after refresh. 
    <a href="account.html" style="color: #4c9949;">Login</a> to save permanently.</span>
  </p>
</section>
    </main>
</div>


  </div>


  <!------ featured categories ------>
    <div class="home-page">
        <div class="categories" id="body">
            <div class="small-container">
<h2 class="title" id="categories" align="center" style="font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; color: rgb(46, 128, 46); line-height: 60px;">
                    Featured Categories
                </h2>
                <div class="row">
                <div class="col-3" data-aos="fade-up">
                    <a href="userproducts.html"><img src="Live chicken sticker.png" style="height: 180px;"></a>
                    <h4 align="center">LIVE CHICKEN</h4>
                </div>
                <div class="col-3" data-aos="fade-up">
                    <a href="userproducts.html"><img src="Ray fish sticker.png" style="height: 180px;"></a>
                    <h4 align="center">RAY-FISH</h4>
                </div>
                <div class="col-3" data-aos="fade-up">
                    <a href="userproducts.html"><img src="pig sticker.png"></a>
                    <h4 align="center">LIVE PIGS</h4>
                </div>
            </div>
            </div>
            
        </div>

        <!-----featured products-->
        <div class="small-container" id="categories">
            <h2 class="title" id="fproducts">
                Featured Products
            </h2><br>
            <div class="row">
                <div class="col-4" data-aos="fade-up">
                    <a href="userproducts.html"><img src="Pork sticker.png" style="margin-top: 40px;"></a>
                    <h4 style="margin-left: 20px;">ALAWUSA FARM-FRESH PORK (PROCESSED)</h4>
                    <div class="rating" style="margin-left: 20px;">
                        <span style="color: #4caf50;">&starf;</span>
                        <span style="color: #4caf50;">&starf;</span>
                        <span style="color: #4caf50;">&starf;</span>
                        <span style="color: #4caf50;">&starf;</span>
                        <span style="color: #4caf50;">&starf;</span>
                    </div>
                    <p style="font-size: larger; margin-left: 20px;"><strike>N</strike>3,500.00 | <strike>N</strike>5,500.00 <br><strike>N</strike>10,000.00</p>
                </div>
                <div class="col-4" data-aos="fade-up">
                    <a href="userproducts.html"><img src="processed chicken sticker.png"></a>
                    <h4 style="margin-left: 20px;">ALAWUSA FARM-FRESH FULL CHICKEN (PROCESSED)</h4>
                    <div class="rating" style="margin-left: 20px;">
                        <span style="color: #4caf50;">&starf;</span>
                        <span style="color: #4caf50;">&starf;</span>
                        <span style="color: #4caf50;">&starf;</span>
                        <span style="color: #4caf50;">&starf;</span>
                        <span style="color: #4caf50;">&starf;</span>
                    </div>
                    <p style="font-size: larger; margin-left: 20px;"><strike>N</strike>15,000 - <strike> N</strike>35,000</p>
                </div>
                <div class="col-4" data-aos="fade-up">
                    <a href="userproducts.html"><img src="Processed Rayfish sticker.png" style="height: 150px;"></a>
                    <h4 style="margin-left: 20px;">ALAWUSA SOURCED FRESH RAYFISH</h4>
                    <div class="rating" style="margin-left: 20px;">
                        <span style="color: #4caf50;">&starf;</span>
                        <span style="color: #4caf50;">&starf;</span>
                        <span style="color: #4caf50;">&starf;</span>
                        <span style="color: #4caf50;">&starf;</span>
                        <span style="color: #4caf50;">&starf;</span>
                    </div>
                    <p style="font-size: larger; margin-left: 20px;"><strike>N</strike>2,000</p>
                </div>
            </div>

            <!---latest products-->
            <h2 class="title" id="lproducts">
                Latest Products
            </h2>
            <div class="row">
                <div class="col-4" data-aos="fade-up">
                    <a href="userproducts.html"><img src="catfish pic.jpeg" style="margin-top: 30px;"></a>
                    <h4 style="margin-left: 20px;">ALAWUSA FARM-FRESH CATFISH</h4>
                    <div class="rating" style="margin-left: 20px;">
                        <span style="color: #4caf50;">&starf;</span>
                        <span style="color: #4caf50;">&starf;</span>
                        <span style="color: #4caf50;">&starf;</span>
                        <span style="color: #4caf50;">&starf;</span>
                        <span style="color: #4caf50;">&starf;</span>
                    </div>
                    <p style="font-size: larger; margin-left: 20px;"><strike>N</strike>2,000.00 - <strike>N</strike>4,000.00 per 1</p>
                </div>
                <div class="col-4" data-aos="fade-up">
                    <a href="userproducts.html"><img src="Dried catfish sticker.png" style="height: 180px;"></a>
                    <h4 style="margin-left: 20px;">ALAWUSA DRIED CAT-FISH (CARTON)</h4>
                    <div class="rating" style="margin-left: 20px;">
                        <span style="color: #4caf50;">&starf;</span>
                        <span style="color: #4caf50;">&starf;</span>
                        <span style="color: #4caf50;">&starf;</span>
                        <span style="color: #4caf50;">&starf;</span>
                        <span style="color: #4caf50;">&starf;</span>
                    </div>
                    <p style="font-size: larger; margin-left: 20px;"><strike>N</strike>20,000 - <strike> N</strike>50,000</p>
                </div>
                <div class="col-4" data-aos="fade-up">
                    <a href="userproducts.html"><img src="sole fish sticker.png" style="height: 180px;"></a>
                    <h4 style="margin-left: 20px;">ALAWUSA SOURCED DRIED SOLE FISH</h4>
                    <div class="rating" style="margin-left: 20px;">
                        <span style="color: #4caf50;">&starf;</span>
                        <span style="color: #4caf50;">&starf;</span>
                        <span style="color: #4caf50;">&starf;</span>
                        <span style="color: #4caf50;">&starf;</span>
                        <span style="color: #4caf50;">&starf;</span>
                    </div>
                    <p style="font-size: larger; margin-left: 20px;"><strike>N</strike>5,500 - <strike> N</strike>10,000</p>
                </div>
            </div>
        </div>
        </div>

        <!-- Newsletter Section -->
  <section class="newsletter-section">
    <div class="container">
      <div class="newsletter-content">
        <div class="newsletter-text">
          <h3>Sign Up For Our Newsletter</h3>
          <p>Get email updates about our latest products and special offers</p>
        </div>
       <form  action="https://sheetdb.io/api/v1/7pjxxvpo241l5" method="POST" id="newsletterForm" class="newsletter-form">
  <input type="email" name="data[email]" placeholder="Your email address" required>
  <button type="submit">Subscribe</button>
</form>
      </div>
    </div>
  </section>
  


  <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-container">
                <div class="footer-col">
                    <a href="homepage.html"><img src="Alawusa heritage logo.png" alt="Alawusa Heritage" style="width: 200px; filter: brightness(2) invert(0);"></a>
                    <p>Bringing the Best of Our Farm to Your Table</p>
                    
                    <div class="social-links">
                        <a href="https://www.facebook.com/profile.php?id=61577588632364&mibextid=ZbWKwL"><img src="facebook.png" alt="Facebook"></a>
                        <a href="https://www.instagram.com/alawusaheritage?igsh=MXJnbHJ5dGtlOGs0eQ=="><img src="instagram.png" alt="Instagram"></a>
                        <a href="https://wa.link/zp8ngg"><img src="whatsapp.png" alt="WhatsApp"></a>
                    </div>
                </div>
                
                <div class="footer-col">
                    <h3>Customer Service</h3>
                    <ul>
                        <li><a href="userfaq.html">FAQs</a></li>
                        <li><a href="usercontact.html">Contact Us</a></li>
                        
                    </ul>
                </div>
                
                <div class="footer-col">
                    <h3>Useful Links</h3>
                    <ul>
                        <li><a href="userblogpost.html">Farm Tips/Blog Post</a></li>
                        <li><a href="userourfarm.html">Our Farm/Sustainability</a></li>
                        <li><a href="userrecipes.html">Recipes</a></li>
                        <li><a href="useraboutus.html">About Us</a></li>
                    </ul>
                </div>
                
                <div class="footer-col">
                    <h3>Contact Info</h3>
                    <ul>
                        <li><i class="fas fa-phone"></i> +234-802-227-6254</li>
                        <li><i class="fas fa-envelope" ></i> alawusaheritage@gmail.com</li>
                        <li><i class="fas fa-map-marker-alt" ></i> Alawusa-House, Hungotho, Tube, Ipokia LG, Ogun State</li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2025 Alawusa Heritage Fish & Farms. All rights reserved.</p>
            </div>
        </div>
    </footer>


  <script>
    /* -------------------------
       Sidebar toggle + overlay
       ------------------------- */
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    const menuToggle = document.getElementById('menuToggle');

    function openSidebar() {
      sidebar.classList.add('open');
      overlay.classList.add('show');
      menuToggle.setAttribute('aria-expanded', 'true');
      sidebar.setAttribute('aria-hidden', 'false');
      overlay.setAttribute('aria-hidden', 'false');
      // trap focus could be added here for a11y
    }
    function closeSidebar() {
      sidebar.classList.remove('open');
      overlay.classList.remove('show');
      menuToggle.setAttribute('aria-expanded', 'false');
      sidebar.setAttribute('aria-hidden', 'true');
      overlay.setAttribute('aria-hidden', 'true');
    }
    function toggleSidebar() {
      if (sidebar.classList.contains('open')) closeSidebar(); else openSidebar();
    }

    menuToggle.addEventListener('click', toggleSidebar);
    overlay.addEventListener('click', closeSidebar);
    // close with Escape key
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeSidebar(); });

    /* -------------------------
       Cart count (localStorage persistence)
       ------------------------- */
    const CART_KEY = 'alawusa_cart_count';
    const cartCountEl = document.getElementById('cart-count');

    function getCartCount() {
      const raw = localStorage.getItem(CART_KEY);
      return raw ? parseInt(raw, 10) || 0 : 0;
    }
    function setCartCount(n) {
      localStorage.setItem(CART_KEY, String(n));
      cartCountEl.textContent = n;
      // optionally hide when zero:
      cartCountEl.style.display = n > 0 ? 'inline-block' : 'none';
    }

    // wire the demo add-to-cart button (for testing)
    document.getElementById('addCartBtn').addEventListener('click', () => {
      const current = getCartCount();
      setCartCount(current + 1);
    });

    // initialize
    (function init() {
      const initial = getCartCount();
      setCartCount(initial);
      // demo names â€” set both greeting and main area
      const name = localStorage.getItem('alawusa_user_name') || 'Customer';
      document.getElementById('userGreeting').textContent = name;
      document.getElementById('userNameMain').textContent = name;
    })();

    /* -------------------------
       Simple search behaviour (optional)
       ------------------------- */
    document.getElementById('searchBtn').addEventListener('click', () => {
      const q = document.getElementById('searchInput').value.trim();
      if (!q) { document.getElementById('searchInput').focus(); return; }
      // for demo we just alert â€” replace with your search route
      window.location.href = `search.html?q=${encodeURIComponent(q)}`;
    });


    
  </script>

  <script>
// Desktop search functionality
document.addEventListener('DOMContentLoaded', function() {
  // Initialize search functionality after DOM is loaded
  initializeSearch();
});

function initializeSearch() {
  // Desktop search
  const searchBtn = document.getElementById('searchBtn');
  const searchInput = document.getElementById('searchInput');
  
  if (searchBtn && searchInput) {
    searchBtn.addEventListener('click', performSearch);
    
    searchInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        performSearch();
      }
    });
  }

  // Mobile search overlay functionality
  const mobileOverlay = document.getElementById('mobileSearchOverlay');
  const mobileIcon = document.getElementById('mobileSearchIcon');
  const closeBtn = document.getElementById('closeMobileSearch');
  const mobileSearchBtn = document.getElementById('mobileSearchBtn');
  const mobileSearchInput = document.getElementById('mobileSearchInput');

  if (mobileIcon) {
    mobileIcon.addEventListener('click', () => {
      if (mobileOverlay) {
        mobileOverlay.style.display = 'flex';
        if (mobileSearchInput) {
          mobileSearchInput.focus();
        }
      }
    });
  }

  if (closeBtn) {
    closeBtn.addEventListener('click', () => {
      if (mobileOverlay) {
        mobileOverlay.style.display = 'none';
      }
    });
  }

  if (mobileSearchBtn && mobileSearchInput) {
    mobileSearchBtn.addEventListener('click', performMobileSearch);
    
    mobileSearchInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        performMobileSearch();
      }
    });
  }

  // Close mobile overlay when clicking outside
  if (mobileOverlay) {
    mobileOverlay.addEventListener('click', (e) => {
      if (e.target === mobileOverlay) {
        mobileOverlay.style.display = 'none';
      }
    });
  }
}

function performSearch() {
  const searchInput = document.getElementById('searchInput');
  if (!searchInput) return;
  
  const q = searchInput.value.trim();
  if (!q) {
    alert('Please enter a product name to search');
    searchInput.focus();
    return;
  }
  
  // Redirect to products page with search query
  window.location.href = `userproducts.html?search=${encodeURIComponent(q)}`;
}

function performMobileSearch() {
  const mobileSearchInput = document.getElementById('mobileSearchInput');
  const mobileOverlay = document.getElementById('mobileSearchOverlay');
  
  if (!mobileSearchInput) return;
  
  const q = mobileSearchInput.value.trim();
  if (!q) {
    alert('Please enter a product name to search');
    mobileSearchInput.focus();
    return;
  }
  
  // Redirect to products page with search query
  window.location.href = `userproducts.html?search=${encodeURIComponent(q)}`;
  
  // Close overlay
  if (mobileOverlay) {
    mobileOverlay.style.display = 'none';
  }
}
</script>

  

  

  <script type="module">
    
    // Newsletter signup
    document.getElementById('newsletterForm').addEventListener('submit', function(e) {
  e.preventDefault();
  fetch(this.action, {
    method: "POST",
    body: new FormData(this),
  }).then(() => {
    alert("ðŸŽ‰ Thank you for subscribing!");
    this.reset();
  });
});
</script>

<script>


function updateCartCount() {
    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
    document.getElementById("cartCount").textContent = totalItems;
  }
window.onload = updateCartCount;
</script>

<script>
(function(){if(!window.chatbase||window.chatbase("getState")!=="initialized"){window.chatbase=(...arguments)=>{if(!window.chatbase.q){window.chatbase.q=[]}window.chatbase.q.push(arguments)};window.chatbase=new Proxy(window.chatbase,{get(target,prop){if(prop==="q"){return target.q}return(...args)=>target(prop,...args)}})}const onLoad=function(){const script=document.createElement("script");script.src="https://www.chatbase.co/embed.min.js";script.id="TcwUb0cLFLQZZlxVHISps";script.domain="www.chatbase.co";document.body.appendChild(script)};if(document.readyState==="complete"){onLoad()}else{window.addEventListener("load",onLoad)}})();
</script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const userMenu = document.querySelector(".user-menu");
  const dropdown = userMenu.querySelector(".dropdown");
  const toggleIcon = userMenu.querySelector("i.fa-angle-down");

  // Initially hide dropdown
  dropdown.style.display = "none";

  // Toggle dropdown when clicking the icon
  toggleIcon.addEventListener("click", (e) => {
    e.stopPropagation(); // prevent click from bubbling up
    const isVisible = dropdown.style.display === "block";
    dropdown.style.display = isVisible ? "none" : "block";
    toggleIcon.classList.toggle("rotated", !isVisible); // optional rotation effect
  });

  // Close dropdown if user clicks anywhere else
  document.addEventListener("click", (e) => {
    if (!userMenu.contains(e.target)) {
      dropdown.style.display = "none";
      toggleIcon.classList.remove("rotated");
    }
  });
});
</script>


<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { 
    getAuth, 
    onAuthStateChanged, 
    updatePassword, 
    reauthenticateWithCredential, 
    EmailAuthProvider 
  } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
  import { 
    getFirestore, 
    doc, 
    getDoc, 
    setDoc, 
    updateDoc 
  } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
  import { 
    getStorage, 
    ref, 
    uploadBytes, 
    getDownloadURL 
  } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-storage.js";

  // Your Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyDuxTHLfwiETTMO6Dx7YMehngZqWLgUlH0",
    authDomain: "alawusa-heritage-website.firebaseapp.com",
    projectId: "alawusa-heritage-website",
    storageBucket: "alawusa-heritage-website.firebasestorage.app",
    messagingSenderId: "857988164081",
    appId: "1:857988164081:web:ccac1200d344a8bd82bc50",
    measurementId: "G-TJQJMVVMZG"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);
  const storage = getStorage(app);

  // Constants for storage keys
  const GUEST_IMAGE_KEY = 'alawusa_guest_profile_image';
  const GUEST_IMAGE_TIMESTAMP_KEY = 'alawusa_guest_image_timestamp';

  // Function to update displayed account details
  function updateDisplayedUserData(userData) {
    document.getElementById("displayName").textContent = userData.name || "Not set";
    document.getElementById("displayEmail").textContent = userData.email || "Not set";
    document.getElementById("displayPhone").textContent = userData.phone || "Not set";
    document.getElementById("displayAddress").textContent = userData.address || "Not set";
    
    // Also update the edit form with current values
    document.getElementById("editName").value = userData.name || "";
    document.getElementById("editPhone").value = userData.phone || "";
    document.getElementById("editAddress").value = userData.address || "";
  }

  // Function to load user data
  async function loadUserData(user) {
    const userRef = doc(db, "users", user.uid);
    const userSnap = await getDoc(userRef);

    if (userSnap.exists()) {
      const data = userSnap.data();
      const userData = {
        name: data.name || "",
        email: user.email || "",
        phone: data.phone || "",
        address: data.address || "",
        photoURL: data.photoURL || "avatar.png"
      };
      
      updateDisplayedUserData(userData);
      if (data.photoURL) {
        document.getElementById("profileImg").src = data.photoURL;
      }
      
      // Update storage info for logged-in users
      // In the profile picture section, update the storage info
document.getElementById("storageInfo").innerHTML = 
  'Guest users: Picture will be saved temporarily. ' +
  '<a href="account.html" style="color: #4c9949;">Login</a> to save permanently.';
    } else {
      // Create user document if it doesn't exist
      await setDoc(userRef, { 
        name: user.displayName || "", 
        email: user.email || "",
        phone: "", 
        address: "", 
        photoURL: "" 
      });
    }
  }

  // Function to handle guest user image
  function handleGuestUser() {
    // Hide account editing sections for guests
    document.getElementById("edit-account").style.display = "none";
    document.getElementById("change-password").style.display = "none";
    
    // Update storage info
    document.getElementById("storageInfo").innerHTML = 
      'Guest users: Picture will be lost after refresh. ' +
      '<a href="account.html" style="color: #4c9949;">Login</a> to save permanently.';
    
    // Load guest image from localStorage if exists
    const guestImage = localStorage.getItem(GUEST_IMAGE_KEY);
    const timestamp = localStorage.getItem(GUEST_IMAGE_TIMESTAMP_KEY);
    
    if (guestImage) {
      document.getElementById("profileImg").src = guestImage;
    }
    
    // Set up guest upload handler
    setupGuestUploadHandler();
  }

  // Function to setup upload handler for guest users
function setupGuestUploadHandler() {
  const uploadBtn = document.getElementById("uploadBtn");
  const fileInput = document.getElementById("uploadProfilePic");
  
  uploadBtn.addEventListener("click", () => {
    const file = fileInput.files[0];
    if (!file) {
      alert("Please select a file to upload");
      return;
    }

    // Check file type
    if (!file.type.startsWith('image/')) {
      alert("Please select an image file");
      return;
    }

    // Check file size (max 5MB)
    if (file.size > 5 * 1024 * 1024) {
      alert("File size must be less than 5MB");
      return;
    }

    // Process image for guest user
    const reader = new FileReader();
    reader.onload = function(e) {
      const imageDataURL = e.target.result;
      
      // Save to localStorage for guest users
      localStorage.setItem(GUEST_IMAGE_KEY, imageDataURL);
      localStorage.setItem(GUEST_IMAGE_TIMESTAMP_KEY, Date.now().toString());
      
      // Update profile image display
      document.getElementById("profileImg").src = imageDataURL;
      
      alert("Profile picture uploaded successfully!");
    };
    reader.readAsDataURL(file);
  });
}

  // Function to setup upload handler for authenticated users
  function setupAuthenticatedUploadHandler(user) {
    const uploadBtn = document.getElementById("uploadBtn");
    const fileInput = document.getElementById("uploadProfilePic");
    
    uploadBtn.addEventListener("click", async () => {
      const file = fileInput.files[0];
      if (!file) {
        alert("Please select a file to upload");
        return;
      }

      // Check file type
      if (!file.type.startsWith('image/')) {
        alert("Please select an image file");
        return;
      }

      // Check file size (max 5MB)
      if (file.size > 5 * 1024 * 1024) {
        alert("File size must be less than 5MB");
        return;
      }

      try {
        // Show preview immediately
        const reader = new FileReader();
        reader.onload = function(e) {
          document.getElementById("profileImg").src = e.target.result;
        };
        reader.readAsDataURL(file);

        const storageRef = ref(storage, `profilePics/${user.uid}`);
        await uploadBytes(storageRef, file);
        const downloadURL = await getDownloadURL(storageRef);

        await updateDoc(doc(db, "users", user.uid), { 
          photoURL: downloadURL 
        });
        
        // Update to the downloadURL after upload
        document.getElementById("profileImg").src = downloadURL;
        alert("Profile picture uploaded successfully!");
      } catch (error) {
        console.error("Error uploading profile picture:", error);
        alert("Error uploading profile picture: " + error.message);
      }
    });
  }

  // Listen for auth state changes
  onAuthStateChanged(auth, async (user) => {
    if (user) {
      // User is logged in
      await loadUserData(user);
      setupAuthenticatedUploadHandler(user);
      
      // Set up account editing for logged-in users
      document.getElementById("saveAccountBtn").addEventListener("click", async () => {
        const name = document.getElementById("editName").value.trim();
        const phone = document.getElementById("editPhone").value.trim();
        const address = document.getElementById("editAddress").value.trim();

        if (!name) {
          alert("Please enter your full name");
          return;
        }

        try {
          await updateDoc(doc(db, "users", user.uid), { 
            name, 
            phone, 
            address 
          });
          
          // Update the displayed data immediately
          const updatedData = {
            name: name,
            email: user.email,
            phone: phone,
            address: address
          };
          updateDisplayedUserData(updatedData);
          
          alert("Profile updated successfully!");
        } catch (error) {
          console.error("Error updating profile:", error);
          alert("Error updating profile: " + error.message);
        }
      });

      // Set up password change for logged-in users
      document.getElementById("changePasswordBtn").addEventListener("click", async () => {
        const oldPassword = document.getElementById("oldPassword").value;
        const newPassword = document.getElementById("newPassword").value;
        const confirmPassword = document.getElementById("confirmPassword").value;

        if (!oldPassword || !newPassword || !confirmPassword) {
          alert("Please fill in all password fields");
          return;
        }

        if (newPassword !== confirmPassword) {
          alert("New passwords do not match!");
          return;
        }

        if (newPassword.length < 6) {
          alert("New password must be at least 6 characters long");
          return;
        }

        try {
          const credential = EmailAuthProvider.credential(user.email, oldPassword);
          await reauthenticateWithCredential(user, credential);
          await updatePassword(user, newPassword);
          
          // Clear password fields
          document.getElementById("oldPassword").value = "";
          document.getElementById("newPassword").value = "";
          document.getElementById("confirmPassword").value = "";
          
          alert("Password updated successfully!");
        } catch (err) {
          console.error("Password update error:", err);
          if (err.code === 'auth/wrong-password') {
            alert("Current password is incorrect");
          } else if (err.code === 'auth/weak-password') {
            alert("New password is too weak");
          } else {
            alert("Error updating password: " + err.message);
          }
        }
      });

    } else {
      // User is not logged in (guest)
      handleGuestUser();
      
      // Update display for guest user
      document.getElementById("displayName").textContent = "Guest User";
      document.getElementById("displayEmail").textContent = "Not logged in";
      document.getElementById("displayPhone").textContent = "Not set";
      document.getElementById("displayAddress").textContent = "Not set";
    }
  });

  // Logout functionality (only for logged-in users)
  document.getElementById("logoutButton").addEventListener("click", async () => {
    try {
      await auth.signOut();
      window.location.href = "account.html";
    } catch (error) {
      console.error("Logout error:", error);
    }
  });
</script>

<script>
// Search functionality for homepage
document.addEventListener('DOMContentLoaded', function() {
  // Desktop search
  const searchBtn = document.getElementById('searchBtn');
  const searchInput = document.getElementById('searchInput');
  
  if (searchBtn && searchInput) {
    searchBtn.addEventListener('click', performSearch);
    
    searchInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        performSearch();
      }
    });
  }

  // Mobile search
  const mobileSearchBtn = document.getElementById('mobileSearchBtn');
  const mobileSearchInput = document.getElementById('mobileSearchInput');
  const mobileSearchOverlay = document.getElementById('mobileSearchOverlay');

  if (mobileSearchBtn && mobileSearchInput) {
    mobileSearchBtn.addEventListener('click', performMobileSearch);
    
    mobileSearchInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        performMobileSearch();
      }
    });
  }

  // Mobile search overlay functionality
  const mobileSearchIcon = document.getElementById('mobileSearchIcon');
  const closeMobileSearch = document.getElementById('closeMobileSearch');

  if (mobileSearchIcon) {
    mobileSearchIcon.addEventListener('click', () => {
      if (mobileSearchOverlay) {
        mobileSearchOverlay.style.display = 'flex';
        if (mobileSearchInput) {
          mobileSearchInput.focus();
        }
      }
    });
  }

  if (closeMobileSearch) {
    closeMobileSearch.addEventListener('click', () => {
      if (mobileSearchOverlay) {
        mobileSearchOverlay.style.display = 'none';
      }
    });
  }

  // Close mobile overlay when clicking outside
  if (mobileSearchOverlay) {
    mobileSearchOverlay.addEventListener('click', (e) => {
      if (e.target === mobileSearchOverlay) {
        mobileSearchOverlay.style.display = 'none';
      }
    });
  }
});

function performSearch() {
  const searchInput = document.getElementById('searchInput');
  if (!searchInput) return;
  
  const q = searchInput.value.trim();
  if (!q) {
    alert('Please enter a product name to search');
    searchInput.focus();
    return;
  }
  
  // Redirect to products page with search query
  window.location.href = `userproducts.html?search=${encodeURIComponent(q)}`;
}

function performMobileSearch() {
  const mobileSearchInput = document.getElementById('mobileSearchInput');
  const mobileSearchOverlay = document.getElementById('mobileSearchOverlay');
  
  if (!mobileSearchInput) return;
  
  const q = mobileSearchInput.value.trim();
  if (!q) {
    alert('Please enter a product name to search');
    mobileSearchInput.focus();
    return;
  }
  
  // Redirect to products page with search query
  window.location.href = `userproducts.html?search=${encodeURIComponent(q)}`;
  
  // Close overlay
  if (mobileSearchOverlay) {
    mobileSearchOverlay.style.display = 'none';
  }
}
</script>

</body>
</html>
